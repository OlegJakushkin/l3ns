# l3ns

Welcome to the L3 Network Simulator repository.


## Cluster requirements
* Всё запускается от рута
* У рута должен быть доступ без пароля на руты всех узлов кластера
* wg
* /tmp/l3ns

#### TODO:
* Проерять уникальность имени сети и контейнера
* ssh туннели остаются
* Опциональный ввод пароля при подключении к хостам 
  (Для этого нужно сделать форфардинг докер-сокета через paramiko)
* нужно убеждаться, что `detach=True`
* нормальные конфиги с учётом модулей
* проверить, что в iptables не остаётся мусора
* нормальные имена временных файлов по аналогии с именем wg-интерфейса
* адекватная работа со временными файлами
* заменить лок через `put_string` в `ldc.Node.start` на что-то адекватное
* общий интерфейс для добавления файлов/строк в `BaseNode`
* переименовать `Subnet._nodes` чтобы было понятно, что это `dict`, наверное то же самое с `Node._interfaces`
* `WgSubnet.interface_name` могут меняться от запуска к запуску из-за кривого способа построения хэша
* Убрать конфиги в папки сетей для `WgSubnet` и убирать мусор в `WgSubnet.stop`
* connect_internet для wg-сетей
* окончателно убрасть параметр `dc` отовсюду
* нормальные логи
* тесты
* str для `ldc.Subnet`


#### Done:
* настройка сети в `ldc.Node` не работает, если контейнер работает не с рутом (done, неправда)
* Модифицировать энтрипонт для ожидания сокета с учётом образа и аргуметов (ref: https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact)
* Загружать образ, если его нет
* нормальный `Subnet.get_gateway` и, видимо, нотация роутеров
